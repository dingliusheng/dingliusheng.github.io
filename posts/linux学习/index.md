# linux命令使用文档


<!--more-->


# Linux 命令使用文档

1、环境：虚拟机+centOS7

##### 开机关机

```js
//1、保存数据后关机
sync //将数据由内存同步到硬盘中
shutdown  //关机

//2、重启
reboot  //reboot

```

##### 系统的目录结构

/  根目录
- bin : 存放经常使用的命令
- boot: 存放启动linux时使用的一些核心文件，包括一些连接文件及镜像文件（不要动）
- etc: 存放所有的系统管理所需要的配置文件和子目录
- home: 用户的主目录，在linux，每一个用户都有一个自己的目录，一般该目录是以用户的账号命名的
- lib: 存放系统最基本的动态连接共享库，其作用类似于Windows里的dll文件（不要动）
- media: linux系统会自动识别一些设备，例如U盘、光驱等，当识别后，linux会把识别的设置挂载到这个目录
- mmt : 为了让用户临时挂载别的文件系统的，可以把光驱挂载mmt上，然后进入该目录查看光驱里的内容
- opt : 给主机额外安装软件所摆放的目录，比如安装一个oracle数据库
- proc : 是一个虚拟的目录，它是系统内存的映射，可以通过访问这个目录来获取系统信息（不用管）
- root : 系统管理员的用户目录
- sbin : s是super user，这里存放系统管理员使用的系统管理程序
- srv : 存放一些服务服务启动后需要提取的数据
- sys : 安装了linux2.6内核中新出现的一个文件系统sysfs
- tmp : 用来存放一些临时文件。用完就丢的文件可以放在这个目录
- usr : 这是一个非常重要的目录，用户的很多应用程序和文件都放在这个文件下，类似于Windows下的programfiles目录
- usr/bin : 系统用户使用的应用程序
- lost+found : 这个目录一般是空的，当系统非法关机后，这里就存放了一些文件（存放突然关机的一些文件）
- var ：存放不断扩充的东西，习惯将那些经常被修改的文件放到这个目录，包括各种日志
- run : 是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除
- www : 存放服务器网站相关的资源，环境，网站的项目

##### 目录管理

###### cd

```js
cd  //切换目录
cd .. //返回上一级目录
cd  /  //切换到指定文件路径（分相对路径和绝对路径）
```

###### ls

```js
ls //列出子目录清单
-a参数 //all ，查看全部的文件，包含隐藏文件
-l参数 //列出所有的文件，包含文件的属性和权限，没有隐藏文件
//所有的参数都可以组合
```

###### pwd

```js
pwd //显示当前用户所在目录
```

###### mkdir

```js
mkdir //创建文件目录
mkdir test //创建一个名为test的文件夹
mkidr -p test1/test2/test3  //递归创建文件夹test1,test2,test3(创建多级目录)
```

###### rmdir

```js
rmdir test// 删除test文件夹
rmdir -p test1/test2/test3  //递归删除多个目录
//rmdir 只能删除空的目录，如果目录非空，需要先删除文件
```

###### cp

```js
cp test1 test  //复制test1文件到test/目录下
//cp 原来的地方 新的地方
```

###### rm

```js
rm 移除文件或目录
-f参数 强制删除，忽略不存在的文件，不会出现告警
-r参数 递归删除目录
-i参数 询问是否删除
```

###### mv 

```js
mv 移动文件或目录
-f参数 强制
-u参数 只替换已经更新过的文件
mv test1 test2 //如果是test1是文件夹，可以重命名为test2 
```

###### touch

```
touch  创建文件
```

##### 文件属性查看及修改

###### 查看文件属性

通过 ls -l 可以查看文件属性，如

>dr-xr-xr-x.  5 root  root 4096  Feb 20  11:10  boot

第一个字符表示这个是文件，目录，链接文件等等

```js
d  //表示是一个目录
-  //表示是一个文件
l  //表示是一个链接文件（类别Windows的快捷键）
b  //表示为装置文件里面的可供存储的接口设备（可随机存储装置）
c  //表示装置文件里的串行设置，例如键盘，鼠标（一次性读取装置）
```

接下来的字符，以三个为一组，且均为【rwx】的三个参数的组合，rwx先后顺序固定的，如果没有对应的权限则为 - 

```js
r //表示可读
w //表示可写
x //表示可执行
- //表示无权限
//三种用户组：owner , group ,ohter
```

5 表示文件的个数

root 文件的归属者    root 文件所属的用户组

4096 表示文件的大小

Feb 20  11:10   时间

boot 文件名（如果是连接文件则会知名链接的谁 如 lib -> usr/lib）

###### chgrp

```js
chgrp //更改文件所属的用户组
chgrp [-R] 文件所属的用户组 文件名
```

###### chown

```js
chown //更改文件所属的用户（文件的归属者）
chown [-R] 文件的归属者 文件名
chown [-R] 文件的归属者:文件所属的用户组  文件名
```

###### chmod

```js
chmod //更改文件的权限设置
//三种用户权限设置：owner , group ,ohter
//rwx 对应 相应的二进制，有相应的权限为在对应的位置上为1（反之，则为0） 如拥有rwx权限，则111 ,十进制为7
chmod 770 文件名
```

##### 查看文件内容

```js
cat //由第一行开始显示文件内容
tac //从最后一行开始显示，可以看出tac,是cat的倒写
nl //显示的时候，顺便输出行号
more //一页一页的显示文件内容（空格键翻页，enter向下翻一行）
less //与more类似，但比more更好的是，可以往前翻页（空格键翻页，上下键表示前后翻页，q退出，/要查询的字符串，向下查询文件中符合的字符串 ，?要查询的字符串，向上查询文件中符合的字符串）
head //只看头部几行, -n 行数  查看显示指定行数 
tail //只看尾巴几行, -n 行数  查看显示指定行数 
```

##### 硬链接和软连接

> 硬链接  

假设A是B的硬链接，那么将B删除后，仍然可以通过A来访问原先B的内容。可以理解为A和B都指向同一个文件或目录，可以用这种方式，链接到一些重要的文件上，防止误删。

> 软链接

假设A是B的软链接，A就是类似于windows下的快捷方式，依附于B

###### 创建链接 ln

```js
ln  f1  f2 //创建f1的硬链接f2
ln  -s f1 f3 //创建f1的软链接f3 
```

##### vim编辑器

###### 三种模式

命令模式--- i,a--->输入模式

输入模式--esc-->命令模式

命令模式-- : （输入冒号）-->底线命令模式

底线命令模式--回车键-->命令模式

##### 账号管理

###### 创建用户

```js
useradd //添加用户
-m参数 //自动创建这个用户的主目录如/home/zhangsan
useradd -m zhangsan
//linux中，一切皆文件，添加用户就是往某个文件写入用户信息，/etc/passwd ，用户加密后的口令：/etc/shadow
-G参数 //分配用户组
```

###### 删除用户

```js
userdel //删除用户
-r参数 //删除用户时并把它的目录页一块删掉
userdel -r zhangsan
```

###### 修改用户

```js
usermod //修改用户
```

###### 切换用户

```js
su //切换用户
su zhangsan //切换到张三用户
exit //退出登录，退回原来用户
```

###### 修改主机名

```js
hostname //查看当前主机名
hostname 新的主机名 //重启后就可以了（临时的）
```

###### 修改密码

```js
passwd username//root设置其他用户密码
passwd //普通用户得验证旧密码
```

###### 锁定账号（冻结账号）

```js
passwd -l zhangsan  //锁定用户
passwd -d zhangsan  //清空用户密码，没有密码也不能登入
passwd -u zhangsan  //解锁
```

##### 用户组管理

###### 创建用户组

```js
groupadd  //创建用户组
//用户组的添加、删除、修改实际上就是对/etc/group 文件的更新
groupadd student //创建学生组
groupadd -g 520 student //创建指定id的用户组
```

###### 删除用户组

```js
groupdel //删除用户组
groupdel student  //删除学生组
```

###### 修改用户组

```js
groupmod //修改用户组
```

##### 磁盘管理

###### df

```js
df //列出文件系统整体的磁盘使用量（字节单位）
df -h //（M或G为单位）
```

###### du

```js
du  //检查磁盘空间的使用量
du -a 
du -sm /*  //检查根目录下每个目录所占用的容量
```

###### 挂载磁盘或文件

```js
mount //挂载磁盘
mont /dev/U /mnt/U //将外部设置U挂载到mnt目录下，实现访问
```

###### 卸载挂载

```js
umount  -f [挂载位置]   //强制卸载挂载的文件或磁盘
```

##### 进程管理

1、在linux中，每个程序都有自己的一个进程，每一个进程都有一个id号

2、每一个进程都有一个父进程

3、进程可以有两种存在方式：前台，后台运行

4、一般情况服务都是后台运行的，基本的程序是前台运行的

###### 查看进程

```js
ps //查看当前系统中正在执行的各种进程信息
-a  //显示当前终端所有的进程信息
-u  //以用户的信息显示进程
-x  //显示后台运行进程
ps -aux|grep mysql  //查看mysql 相关的进程
ps -ef  //可以查到父进程的信息
ps -ef|grep mysql  


pstree  //看父进程可以通过目录树结构来查看
-p  //显示父id
-u  //显示用户组
```

###### 结束进程

```js
kill -9 进程id  //强制结束进程
```

##### 安装软件

安装软件一般有三种方式：rpm,解压缩，yum在线安装

##### 补充

###### 虚拟机快照

虚拟机快照就是当前系统的存档，可以回退到保存的快照

虚拟机--快照--拍摄快照（快照管理器）

###### 本地网络配置

需要保证Linux虚拟机和本级处在同一个网段

配置文件路径：

vi /etc/sysconfig/network-scripts/ifcfg-ens33

修改：

​	BOOTPROTO="static"

添加：

​	IPADDR="192.168.178.11"

​	NETMASK="255.255.255.0"

​	NETWORK="192.168.178.0"

​	GATEWAY="192.168.178.2"

​	DNS1="192.168.178.2"

当修改了/etc/profile文件，想让它立刻生效，而不用重新登录

输入命令：source ifcfg-ens33


